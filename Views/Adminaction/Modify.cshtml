@{
    ViewData["Title"] = "更改个人信息";
}
<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
</head>

<h3 class="page-header">更改个人信息</h3>

<p></p>
<h4>请输入新的个人信息</h4>
<div class="col-sm-4 col-form-label">
    <label for="email" class="form-label">Email address</label>
    <input type="email" class="form-control" id="email" placeholder="name@example.com">
</div>

<div class="col-sm-4 col-form-label">
    <label for="password" class="form-label">Password</label>
    <input type="password" class="form-control" id="password" onchange="checkValid()" placeholder="Enter your password">
    <div class="invalid-feedback">
        Invalid password!
    </div>
    <div class="form-text">
        Your password must be 6-20 characters long, contain letters and numbers, and must not contain spaces, special characters, or emoji.
    </div>
</div>

<div class="col-sm-4 col-form-label">
    <input type="password" class="form-control" id="confirm_password" onchange="checkSame()" placeholder="Re-enter your password">
    <div class="invalid-feedback">
        Different password!
    </div>
</div>

<div class="form-group">
    <button type="submit" value="Create" id="submit" onclick="checkSubmit()" class="btn btn-outline-primary" disabled>Submit</button>
</div>

<script type="text/javascript">
    function checkValid() {
        passWordForm = $("#password").val();
        if (passWordForm.length < 6 || passWordForm.length > 10) {
            $("#password").removeClass("form-control is-valid");
            $("#password").addClass("form-control is-invalid");
            return false;
        }
        else {
            $("#password").removeClass("form-control is-invalid");
            $("#password").addClass("form-control is-valid");
            return true;
        }
    }

    function checkSame() {
        if ($("#password").val() != $("#confirm_password").val()) {
            $("#confirm_password").removeClass("form-control is-valid");
            $("#confirm_password").addClass("form-control is-invalid");
            return false;
        }
        else {
            $("#confirm_password").removeClass("form-control is-invalid");
            $("#confirm_password").addClass("form-control is-valid");
            return true;
        }
    }
    function checkSubmit() {
        $.ajax({
            url: "/Account/modify",
            async: false,
            contentType: "application/json",
            dataType: "json",
            type: "post",
            data: JSON.stringify({ email: $("#email").val(), password: $("#password").val() }),
            success: function (data) {
                alert(data);
            }
        });
    }

    confirm_password.onkeyup = function () {
        if (checkValid() && checkSame()) {
            $("#submit").attr("disabled", false);
        }
        else {
            $("#submit").attr("disabled", true);
        }
    }
    password.onkeyup = function () {
        if (checkValid() && checkSame()) {
            $("#submit").attr("disabled", false);
        }
        else {
            $("#submit").attr("disabled", true);
        }
    }

</script>

</html>